## Intel 4004 命令セット一覧

### 1. データ転送命令
| 命令 | オペコード | 説明 |
|------|----------|------|
| **LDM k** | `0110 kkkk` | Aレジスタに即値 k (0-15) をロード |
| **LD r**  | `1110 0rrr` | Aレジスタにレジスタr (R0-R7) の値をロード |
| **XCH r** | `1111 0rrr` | Aレジスタとレジスタr (R0-R7) の値を交換 |
| **BBL k** | `1000 kkkk` | サブルーチンリターン時にAレジスタに k をセット |
| **LDR r** | `1110 1rrr` | RAMからAレジスタにデータをロード |
| **WRM**   | `1111 1000` | Aレジスタの値をRAMに書き込み |
| **RDM**   | `1111 1001` | RAMからAレジスタにデータをロード |
| **WRR**   | `1111 1010` | Aレジスタの値をI/Oポートに書き込み |
| **RRR**   | `1111 1011` | I/OポートからAレジスタにデータを読み込み |

### 2. 算術・論理演算命令
| 命令 | オペコード | 説明 |
|------|----------|------|
| **ADD r** | `1000 1rrr` | Aレジスタにレジスタrの値を加算（キャリー考慮） |
| **SUB r** | `1001 1rrr` | Aレジスタからレジスタrの値を減算（ボロー考慮） |
| **INC r** | `0111 1rrr` | レジスタrの値を1加算（キャリーなし） |
| **CLB**   | `1111 0000` | Aレジスタをクリアし、キャリーフラグを0に設定 |
| **CLC**   | `1111 0001` | キャリーフラグを0に設定 |
| **IAC**   | `1111 0101` | Aレジスタを1加算（キャリーあり） |
| **CMC**   | `1111 0110` | キャリーフラグを反転 |
| **CMA**   | `1111 0100` | Aレジスタのビットを反転（1の補数を取る） |
| **RAL**   | `1111 0010` | Aレジスタを左ローテート（キャリー含む） |
| **RAR**   | `1111 0011` | Aレジスタを右ローテート（キャリー含む） |

### 3. 分岐命令
| 命令 | オペコード | 説明 |
|------|----------|------|
| **JCN c, adr** | `0001 cccc aaaa aaaa` | 条件付きジャンプ（キャリー・ゼロ・TESTピン） |
| **JUN adr** | `0100 aaaa aaaa aaaa` | 無条件ジャンプ（12ビットアドレス） |
| **JMS adr** | `0101 aaaa aaaa aaaa` | サブルーチンコール（スタックにPCを保存） |
| **BBL k** | `1000 kkkk` | サブルーチンからリターンし、Aレジスタに k をセット |
| **RET**   | `1001 0000` | サブルーチンリターン（PCを復元） |

### 4. 入出力・メモリ操作命令
| 命令 | オペコード | 説明 |
|------|----------|------|
| **WRM**   | `1111 1000` | Aレジスタの値をRAMに書き込み |
| **RDM**   | `1111 1001` | RAMからAレジスタにデータをロード |
| **WRR**   | `1111 1010` | Aレジスタの値をI/Oポートに書き込み |
| **RRR**   | `1111 1011` | I/Oポートの値をAレジスタに読み込み |
| **SRC**   | `1111 1111` | RAMバンクの選択を行う |

### 5. スタック操作命令
| 命令 | オペコード | 説明 |
|------|----------|------|
| **PUSH** | `1111 1100` | 現在のPCをスタックに保存 |
| **POP**  | `1111 1101` | スタックのトップをPCに復元 |

### 6. その他の命令（制御系・特殊用途）
| 命令 | オペコード | 説明 |
|------|----------|------|
| **NOP** | `0000 0000` | 何もしない（No Operation） |
| **HLT** | `0000 0001` | CPUを停止（ハルト命令） |
| **SBM** | `1111 0111` | Aレジスタからキャリーフラグを考慮して減算 |
| **FIN p** | `0011 pppp` | `JIN` 用のページアドレスを取得 |
| **JIN p** | `0010 pppp` | `FIN` で取得したページアドレスにジャンプ |

## まとめ
Intel 4004の命令セットは、1バイト命令と2バイト命令で構成されており、3バイト命令は存在しません。

